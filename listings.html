<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Property Listings - Flat Finder Landlord</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/listings.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggles = document.querySelectorAll('.publish-toggle input');
      
      toggles.forEach(toggle => {
        toggle.addEventListener('change', (e) => {
          const card = e.target.closest('.property-card');
          const status = card.querySelector('.property-status');
          
          if (e.target.checked) {
            status.classList.remove('unpublished');
            status.classList.add('published');
            status.textContent = 'Published';
          } else {
            status.classList.remove('published');
            status.classList.add('unpublished');
            status.textContent = 'Unpublished';
          }
        });
        
        // Initialize status on load
        const card = toggle.closest('.property-card');
        const status = card.querySelector('.property-status');
        if (!toggle.checked) {
          status.classList.remove('published');
          status.classList.add('unpublished');
          status.textContent = 'Unpublished';
        }
      });
    });
  </script>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="house-icon">
            <div class="roof"></div>
            <div class="base"></div>
          </div>
          <h1>FLAT FINDER LANDLORD</h1>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="index.html" class="nav-item">
          <div class="nav-icon dashboard-icon"></div>
          <span>Dashboard</span>
        </a>
        <a href="listings.html" class="nav-item active">
          <div class="nav-icon listings-icon"></div>
          <span>Listings</span>
        </a>
        <a href="applications.html" class="nav-item">
          <div class="nav-icon applications-icon"></div>
          <span>Applications</span>
        </a>
        <a href="calendar.html" class="nav-item">
          <div class="nav-icon calendar-icon"></div>
          <span>Calendar</span>
        </a>
        <a href="messages.html" class="nav-item">
          <div class="nav-icon messages-icon"></div>
          <span>Messages</span>
        </a>
        <a href="analytics.html" class="nav-item">
          <div class="nav-icon analytics-icon"></div>
          <span>Analytics</span>
        </a>
        <a href="#" class="nav-item logout">
          <div class="nav-icon logout-icon"></div>
          <span>Log out</span>
        </a>
      </nav>
      
      <div class="user-profile">
        <div class="avatar">
          <div class="avatar-placeholder">AJ</div>
        </div>
        <div class="user-info">
          <h3 class="user-name">Andrew James</h3>
          <p class="user-email">AJ@cutlers.co.nz</p>
        </div>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content">
      <div class="page-header">
        <h1 class="page-title">Property Listings</h1>
        <button class="add-listing-btn">
          <span class="plus-icon">+</span>
          Add New Listing
        </button>
      </div>
      
      <div class="listings-grid">
        <!-- Property Listing 1 -->
        <div class="property-card">
          <div class="property-status published">Published</div>
          <div class="property-image" style="background-image: url('https://images.pexels.com/photos/206172/pexels-photo-206172.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')"></div>
          <div class="property-details">
            <h3 class="property-address">35 Queen Street, North Dunedin</h3>
            <p class="property-price">$1,250/wk</p>
            <div class="property-features">
              <div class="feature">
                <div class="feature-icon bed-icon"></div>
                <span>5 beds</span>
              </div>
              <div class="feature">
                <div class="feature-icon shower-icon"></div>
                <span>2 showers</span>
              </div>
              <div class="feature">
                <div class="feature-icon car-icon"></div>
                <span>2 car parks</span>
              </div>
            </div>
            <div class="property-actions">
              <button class="action-btn edit-btn">
                <div class="action-icon edit-icon"></div>
                Edit
              </button>
              <div class="publish-toggle">
                <label class="switch">
                  <input type="checkbox" checked>
                  <span class="slider round"></span>
                </label>
                <span>Publish</span>
              </div>
            </div>
            <button class="delete-btn">
              <div class="action-icon trash-icon"></div>
              Delete
            </button>
          </div>
        </div>
        
        <!-- Property Listing 2 -->
        <div class="property-card">
          <div class="property-status published">Published</div>
          <div class="property-image" style="background-image: url('https://images.pexels.com/photos/1396122/pexels-photo-1396122.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')"></div>
          <div class="property-details">
            <h3 class="property-address">35 Queen Street, North Dunedin</h3>
            <p class="property-price">$1,250/wk</p>
            <div class="property-features">
              <div class="feature">
                <div class="feature-icon bed-icon"></div>
                <span>5 beds</span>
              </div>
              <div class="feature">
                <div class="feature-icon shower-icon"></div>
                <span>2 showers</span>
              </div>
              <div class="feature">
                <div class="feature-icon car-icon"></div>
                <span>2 car parks</span>
              </div>
            </div>
            <div class="property-actions">
              <button class="action-btn edit-btn">
                <div class="action-icon edit-icon"></div>
                Edit
              </button>
              <div class="publish-toggle">
                <label class="switch">
                  <input type="checkbox" checked>
                  <span class="slider round"></span>
                </label>
                <span>Publish</span>
              </div>
            </div>
            <button class="delete-btn">
              <div class="action-icon trash-icon"></div>
              Delete
            </button>
          </div>
        </div>
        
        <!-- Property Listing 3 -->
        <div class="property-card">
          <div class="property-status unpublished">Unpublished</div>
          <div class="property-image" style="background-image: url('https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')"></div>
          <div class="property-details">
            <h3 class="property-address">35 Queen Street, North Dunedin</h3>
            <p class="property-price">$1,250/wk</p>
            <div class="property-features">
              <div class="feature">
                <div class="feature-icon bed-icon"></div>
                <span>5 beds</span>
              </div>
              <div class="feature">
                <div class="feature-icon shower-icon"></div>
                <span>2 showers</span>
              </div>
              <div class="feature">
                <div class="feature-icon car-icon"></div>
                <span>2 car parks</span>
              </div>
            </div>
            <div class="property-actions">
              <button class="action-btn edit-btn">
                <div class="action-icon edit-icon"></div>
                Edit
              </button>
              <div class="publish-toggle">
                <label class="switch">
                  <input type="checkbox">
                  <span class="slider round"></span>
                </label>
                <span>Publish</span>
              </div>
            </div>
            <button class="delete-btn">
              <div class="action-icon trash-icon"></div>
              Delete
            </button>
          </div>
        </div>
      </div>
    </main>
    
    <!-- Preview Popup -->
    <div class="preview-popup-overlay"></div>
    <div class="preview-popup">
      <div class="popup-header">
        <h2>Property Preview</h2>
        <button class="close-preview">&times;</button>
      </div>
      
      <div class="preview-content">
        <div class="preview-images">
          <div class="image-carousel">
            <button class="carousel-btn prev">&lt;</button>
            <div class="carousel-container">
              <div class="carousel-slide active">
                <img src="https://images.pexels.com/photos/206172/pexels-photo-206172.jpeg" alt="Property exterior">
              </div>
              <div class="carousel-slide">
                <img src="https://images.pexels.com/photos/1457842/pexels-photo-1457842.jpeg" alt="Living room">
              </div>
              <div class="carousel-slide">
                <img src="https://images.pexels.com/photos/3935350/pexels-photo-3935350.jpeg" alt="Kitchen">
              </div>
              <div class="carousel-slide">
                <img src="https://images.pexels.com/photos/6585757/pexels-photo-6585757.jpeg" alt="Bedroom">
              </div>
              <div class="carousel-slide">
                <img src="https://images.pexels.com/photos/6585598/pexels-photo-6585598.jpeg" alt="Bathroom">
              </div>
            </div>
            <button class="carousel-btn next">&gt;</button>
          </div>
          <div class="image-dots"></div>
        </div>
        
        <div class="preview-details">
          <h3 class="preview-address"></h3>
          <p class="preview-price"></p>
          <div class="preview-features">
            <div class="feature">
              <div class="feature-icon bed-icon"></div>
              <span></span>
            </div>
            <div class="feature">
              <div class="feature-icon shower-icon"></div>
              <span></span>
            </div>
            <div class="feature">
              <div class="feature-icon car-icon"></div>
              <span></span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
    <!-- Edit Listing Popup -->
    <div class="edit-popup-overlay"></div>
    <div class="edit-listing-popup">
      <div class="popup-header">
        <h2>Edit Listing</h2>
        <button class="close-edit-popup">&times;</button>
      </div>
      
      <div class="image-gallery">
        <div class="gallery-scroll">
          <button class="scroll-btn prev">&lt;</button>
          <div class="gallery-container">
            <div class="gallery-image active" style="background-image: url('https://images.pexels.com/photos/206172/pexels-photo-206172.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')"></div>
            <div class="gallery-image" style="background-image: url('https://images.pexels.com/photos/1396122/pexels-photo-1396122.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')"></div>
            <div class="gallery-image" style="background-image: url('https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1')"></div>
          </div>
          <button class="scroll-btn next">&gt;</button>
        </div>
        <div class="gallery-thumbnails"></div>
        <div class="image-actions">
          <button class="add-image-btn">
            <span class="plus-icon">+</span>
            Add Image
          </button>
          <button class="remove-image-btn">Remove Current Image</button>
        </div>
      </div>
      
      <form class="listing-form">
        <div class="form-group">
          <label for="edit-address">Property Address</label>
          <input type="text" id="edit-address" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="edit-rent">Weekly Rent</label>
            <div class="input-with-prefix">
              <span class="prefix">$</span>
              <input type="number" id="edit-rent" required>
            </div>
          </div>
          <div class="form-group">
            <label for="edit-bond">Bond (weeks)</label>
            <input type="number" id="edit-bond" required min="1">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="edit-bedrooms">Bedrooms</label>
            <input type="number" id="edit-bedrooms" required min="1">
          </div>
          <div class="form-group">
            <label for="edit-bathrooms">Bathrooms</label>
            <input type="number" id="edit-bathrooms" required min="1">
          </div>
          <div class="form-group">
            <label for="edit-parking">Parking Spots</label>
            <input type="number" id="edit-parking" required min="0">
          </div>
        </div>
        
        <div class="form-group">
          <label for="edit-description">Property Description</label>
          <textarea id="edit-description" rows="4" required></textarea>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="edit-available-date">Available From</label>
            <input type="date" id="edit-available-date" required>
          </div>
          <div class="form-group">
            <label for="edit-min-term">Minimum Term (months)</label>
            <input type="number" id="edit-min-term" required min="6">
          </div>
        </div>
        
        <button type="submit" class="submit-btn">Save Changes</button>
      </form>
    </div>
    
    <!-- Add Listing Popup -->
    <div class="popup-overlay"></div>
    <div class="add-listing-popup">
      <div class="popup-header">
        <h2>Add New Listing</h2>
        <button class="close-popup">&times;</button>
      </div>
      <form class="listing-form">
        <div class="form-group">
          <label for="address">Property Address</label>
          <input type="text" id="address" required placeholder="e.g. 35 Queen Street, North Dunedin">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="rent">Weekly Rent</label>
            <div class="input-with-prefix">
              <span class="prefix">$</span>
              <input type="number" id="rent" required placeholder="e.g. 850">
            </div>
          </div>
          <div class="form-group">
            <label for="bond">Bond (weeks)</label>
            <input type="number" id="bond" required value="4" min="1">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="bedrooms">Bedrooms</label>
            <input type="number" id="bedrooms" required min="1">
          </div>
          <div class="form-group">
            <label for="bathrooms">Bathrooms</label>
            <input type="number" id="bathrooms" required min="1">
          </div>
          <div class="form-group">
            <label for="parking">Parking Spots</label>
            <input type="number" id="parking" required min="0">
          </div>
        </div>
        
        <div class="form-group">
          <label for="description">Property Description</label>
          <textarea id="description" rows="4" required placeholder="Describe the property..."></textarea>
        </div>
        
        <div class="form-group">
          <label for="images">Property Images</label>
          <input type="file" id="images" multiple accept="image/*">
          <p class="help-text">Upload up to 10 images (PNG, JPG)</p>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="available-date">Available From</label>
            <input type="date" id="available-date" required>
          </div>
          <div class="form-group">
            <label for="min-term">Minimum Term (months)</label>
            <input type="number" id="min-term" required min="6" value="12">
          </div>
        </div>
        
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="publish">
            Publish listing immediately
          </label>
        </div>
        
        <button type="submit" class="submit-btn">Create Listing</button>
      </form>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Edit listing functionality
      const editBtns = document.querySelectorAll('.edit-btn');
      const editPopup = document.querySelector('.edit-listing-popup');
      const editOverlay = document.querySelector('.edit-popup-overlay');
      const closeEditBtn = document.querySelector('.close-edit-popup');
      
      // Preview functionality
      const previewBtns = document.querySelectorAll('.preview-btn');
      const previewPopup = document.querySelector('.preview-popup');
      const previewOverlay = document.querySelector('.preview-popup-overlay');
      const closePreviewBtn = document.querySelector('.close-preview');
      const carouselContainer = document.querySelector('.carousel-container');
      const carouselSlides = document.querySelectorAll('.carousel-slide');
      const prevSlideBtn = document.querySelector('.carousel-btn.prev');
      const nextSlideBtn = document.querySelector('.carousel-btn.next');
      const imageDots = document.querySelector('.image-dots');
      
      let currentSlide = 0;
      
      function updateCarousel() {
        carouselSlides.forEach((slide, index) => {
          slide.classList.toggle('active', index === currentSlide);
        });
        
        // Update dots
        const dots = imageDots.querySelectorAll('.dot');
        dots.forEach((dot, index) => {
          dot.classList.toggle('active', index === currentSlide);
        });
      }
      
      function createDots() {
        imageDots.innerHTML = '';
        carouselSlides.forEach((_, index) => {
          const dot = document.createElement('div');
          dot.className = `dot ${index === currentSlide ? 'active' : ''}`;
          dot.addEventListener('click', () => {
            currentSlide = index;
            updateCarousel();
          });
          imageDots.appendChild(dot);
        });
      }
      
      prevSlideBtn.addEventListener('click', () => {
        currentSlide = (currentSlide - 1 + carouselSlides.length) % carouselSlides.length;
        updateCarousel();
      });
      
      nextSlideBtn.addEventListener('click', () => {
        currentSlide = (currentSlide + 1) % carouselSlides.length;
        updateCarousel();
      });
      
      function togglePreviewPopup() {
        previewPopup.classList.toggle('active');
        previewOverlay.classList.toggle('active');
        if (previewPopup.classList.contains('active')) {
          createDots();
        }
      }
      
      previewBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const card = btn.closest('.property-card');
          populatePreview(card);
          togglePreviewPopup();
        });
      });
      
      function populatePreview(card) {
        const address = card.querySelector('.property-address').textContent;
        const price = card.querySelector('.property-price').textContent;
        const beds = card.querySelector('.bed-icon').nextElementSibling.textContent;
        const baths = card.querySelector('.shower-icon').nextElementSibling.textContent;
        const parking = card.querySelector('.car-icon').nextElementSibling.textContent;
        
        previewPopup.querySelector('.preview-address').textContent = address;
        previewPopup.querySelector('.preview-price').textContent = price;
        previewPopup.querySelector('.bed-icon').nextElementSibling.textContent = beds;
        previewPopup.querySelector('.shower-icon').nextElementSibling.textContent = baths;
        previewPopup.querySelector('.car-icon').nextElementSibling.textContent = parking;
      }
      
      closePreviewBtn.addEventListener('click', togglePreviewPopup);
      previewOverlay.addEventListener('click', togglePreviewPopup);
      
      const galleryContainer = document.querySelector('.gallery-container');
      const prevBtn = document.querySelector('.scroll-btn.prev');
      const nextBtn = document.querySelector('.scroll-btn.next');
      const thumbnailsContainer = document.querySelector('.gallery-thumbnails');
      
      function toggleEditPopup() {
        editPopup.classList.toggle('active');
        editOverlay.classList.toggle('active');
      }
      
      editBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const card = btn.closest('.property-card');
          populateEditForm(card);
          toggleEditPopup();
        });
      });
      
      closeEditBtn.addEventListener('click', toggleEditPopup);
      editOverlay.addEventListener('click', toggleEditPopup);
      
      // Image gallery navigation
      let currentImageIndex = 0;
      const images = document.querySelectorAll('.gallery-image');
      
      function updateGallery() {
        images.forEach((img, index) => {
          img.classList.toggle('active', index === currentImageIndex);
          const thumbnail = document.createElement('div');
          thumbnail.className = `gallery-thumbnail ${index === currentImageIndex ? 'active' : ''}`;
          thumbnail.style.backgroundImage = img.style.backgroundImage;
          thumbnail.addEventListener('click', () => {
            currentImageIndex = index;
            updateGallery();
          });
          thumbnailsContainer.appendChild(thumbnail);
        });
      }
      
      prevBtn.addEventListener('click', () => {
        currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
        updateGallery();
      });
      
      nextBtn.addEventListener('click', () => {
        currentImageIndex = (currentImageIndex + 1) % images.length;
        updateGallery();
      });
      
      function populateEditForm(card) {
        // Populate form fields with existing data
        document.getElementById('edit-address').value = card.querySelector('.property-address').textContent;
        document.getElementById('edit-rent').value = card.querySelector('.property-price').textContent.match(/\d+/)[0];
        document.getElementById('edit-bedrooms').value = card.querySelector('.bed-icon').nextElementSibling.textContent.match(/\d+/)[0];
        document.getElementById('edit-bathrooms').value = card.querySelector('.shower-icon').nextElementSibling.textContent.match(/\d+/)[0];
        document.getElementById('edit-parking').value = card.querySelector('.car-icon').nextElementSibling.textContent.match(/\d+/)[0];
        
        // Reset gallery
        currentImageIndex = 0;
        thumbnailsContainer.innerHTML = '';
        updateGallery();
      }
      
      const addListingBtn = document.querySelector('.add-listing-btn');
      const popup = document.querySelector('.add-listing-popup');
      const overlay = document.querySelector('.popup-overlay');
      const closeBtn = document.querySelector('.close-popup');
      const listingForm = document.querySelector('.listing-form');

      const togglePopup = () => {
        popup.classList.toggle('active');
        overlay.classList.toggle('active');
      };

      addListingBtn.addEventListener('click', togglePopup);
      closeBtn.addEventListener('click', togglePopup);
      overlay.addEventListener('click', togglePopup);

      listingForm.addEventListener('submit', (e) => {
        e.preventDefault();
        // Here you would typically handle the form submission
        // For now, we'll just close the popup
        togglePopup();
      });
    });
  </script>
</body>
</html>