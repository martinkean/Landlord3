<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flat Finder Landlord</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/sidebar.css">
  <link rel="stylesheet" href="/css/dashboard.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="house-icon">
            <div class="roof"></div>
            <div class="base"></div>
          </div>
          <h1>FLAT FINDER LANDLORD</h1>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="/index.html" class="nav-item active">
          <div class="nav-icon dashboard-icon"></div>
          <span>Dashboard</span>
        </a>
        <a href="/listings.html" class="nav-item">
          <div class="nav-icon listings-icon"></div>
          <span>Listings</span>
        </a>
        <a href="/applications.html" class="nav-item">
          <div class="nav-icon applications-icon"></div>
          <span>Applications</span>
        </a>
        <a href="/calendar.html" class="nav-item">
          <div class="nav-icon calendar-icon"></div>
          <span>Calendar</span>
        </a>
        <a href="/messages.html" class="nav-item">
          <div class="nav-icon messages-icon"></div>
          <span>Messages</span>
        </a>
        <a href="/analytics.html" class="nav-item">
          <div class="nav-icon analytics-icon"></div>
          <span>Analytics</span>
        </a>
        <a href="#" class="nav-item logout">
          <div class="nav-icon logout-icon"></div>
          <span>Log out</span>
        </a>
      </nav>
      
      <div class="user-profile" role="button" tabindex="0" onclick="toggleProfilePopup()">
        <div class="avatar">
          <div class="avatar-placeholder">AJ</div>
        </div>
        <div class="user-info">
          <h3 class="user-name">Andrew James</h3>
          <p class="user-email">AJ@cutlers.co.nz</p>
        </div>
      </div>
    </aside>
    
    <!-- Profile Edit Popup -->
    <div class="profile-popup-overlay"></div>
    <div class="profile-popup">
      <div class="popup-header">
        <h2>Edit Profile</h2>
        <button class="close-popup">&times;</button>
      </div>
      <form class="profile-form">
        <div class="profile-avatar-upload">
          <div class="profile-avatar-preview">AJ</div>
          <label class="upload-btn">
            Upload Photo
            <input type="file" accept="image/*" style="display: none;">
          </label>
        </div>
        <div class="form-group">
          <label for="profile-name">Full Name</label>
          <input type="text" id="profile-name" value="Andrew James" required>
        </div>
        <div class="form-group">
          <label for="profile-email">Email</label>
          <input type="email" id="profile-email" value="AJ@cutlers.co.nz" required>
        </div>
        <div class="form-group">
          <label for="profile-phone">Phone Number</label>
          <input type="tel" id="profile-phone" placeholder="Enter phone number">
        </div>
        <button type="submit" class="submit-btn">Save Changes</button>
      </form>
    </div>

    <!-- Main Content -->
    <main class="main-content">
      <div class="page-header">
        <h1 class="page-title">Welcome back, Andrew!</h1>
      </div>
      
      <div class="dashboard-grid">
        <!-- Quick Actions -->
        <div class="quick-actions-card">
          <h2>Quick Actions</h2>
          <div class="quick-actions">
            <a href="listings.html" class="action-btn">
              <div class="action-icon add-icon"></div>
              <span>Add New Listing</span>
            </a>
            <a href="applications.html" class="action-btn">
              <div class="action-icon review-icon"></div>
              <span>Review Applications</span>
            </a>
            <a href="calendar.html" class="action-btn">
              <div class="action-icon schedule-icon"></div>
              <span>Schedule Viewing</span>
            </a>
          </div>
        </div>
        
        <div class="stats-card">
          <h2>Needs Attention</h2>
          <div class="attention-items">
            <a href="applications.html" class="attention-item">
              <div class="attention-icon applications-attention"></div>
              <div class="attention-content">
                <h3>2 New Applications</h3>
                <p>Awaiting your review</p>
              </div>
              <div class="attention-arrow"></div>
            </a>
            <a href="messages.html" class="attention-item">
              <div class="attention-icon messages-attention"></div>
              <div class="attention-content">
                <h3>1 Unread Message</h3>
                <p>From Gabe Cook-Bonney</p>
              </div>
              <div class="attention-arrow"></div>
            </a>
          </div>
        </div>
        
        <!-- Property Overview -->
        <div class="stats-card">
          <h2>Property Overview</h2>
          <div class="property-stats">
            <div class="stat-item">
              <div class="stat-number">4</div>
              <p>Active Listings</p>
            </div>
            <div class="stat-item">
              <div class="stat-number">85%</div>
              <p>Average Interest Rate</p>
            </div>
            <div class="stat-item">
              <div class="stat-number">$250</div>
              <p>Avg. Price per Room</p>
            </div>
          </div>
        </div>
        
        <!-- Today's Schedule -->
        <div class="stats-card">
          <h2>Today's Schedule</h2>
          <div class="schedule-list">
            <a href="calendar.html" class="schedule-item">
              <div class="schedule-time">13:00</div>
              <div class="schedule-content">
                <h3>Flat inspection</h3>
                <p>33 Bedford Street</p>
              </div>
            </a>
            <a href="calendar.html" class="schedule-item">
              <div class="schedule-time">14:30</div>
              <div class="schedule-content">
                <h3>Pre tenant inspection</h3>
                <p>123 North Rd</p>
              </div>
            </a>
            <a href="calendar.html" class="schedule-item">
              <div class="schedule-time">16:00</div>
              <div class="schedule-content">
                <h3>Tenant interview</h3>
                <p>78 George Street</p>
              </div>
            </a>
          </div>
        </div>
        
        <!-- Recent Activity -->
        <div class="activity-card">
          <h2>Recent Activity</h2>
          <div class="activity-list">
            <div class="activity-item">
              <div class="activity-icon document-icon"></div>
              <div class="activity-content">
                <h3>New application received</h3>
                <p>Charlie Brown + 5 others for 33 Bedford Street</p>
                <span class="activity-time">1 day ago</span>
              </div>
              <a href="applications.html" class="activity-action">Review</a>
            </div>
          
            <div class="activity-item">
              <div class="activity-icon message-icon"></div>
              <div class="activity-content">
                <h3>New message received</h3>
                <p>From Gabe Cook-Bonney about hot water cylinder</p>
                <span class="activity-time">2 days ago</span>
              </div>
              <a href="messages.html" class="activity-action">Reply</a>
            </div>
            
            <div class="activity-item">
              <div class="activity-icon listing-icon"></div>
              <div class="activity-content">
                <h3>Listing updated</h3>
                <p>Price updated for 78 George Street</p>
                <span class="activity-time">3 days ago</span>
              </div>
              <a href="listings.html" class="activity-action">View</a>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script>
    // Define toggleProfilePopup in global scope
    function toggleProfilePopup() {
      const profilePopup = document.querySelector('.profile-popup');
      const profileOverlay = document.querySelector('.profile-popup-overlay');
      
      profilePopup.classList.toggle('active');
      profileOverlay.classList.toggle('active');
      
      if (profilePopup.classList.contains('active')) {
        document.getElementById('profile-name').focus();
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Profile popup functionality
      const userProfile = document.querySelector('.user-profile');
      const profilePopup = document.querySelector('.profile-popup');
      const profileOverlay = document.querySelector('.profile-popup-overlay');
      const closeProfileBtn = profilePopup.querySelector('.close-popup');
      const profileForm = document.querySelector('.profile-form');
      const profileName = document.getElementById('profile-name');
      const profileEmail = document.getElementById('profile-email');
      const profilePhone = document.getElementById('profile-phone');
      const avatarPlaceholders = document.querySelectorAll('.avatar-placeholder');
      const userNameElements = document.querySelectorAll('.user-name');
      const userEmailElements = document.querySelectorAll('.user-email');

      userProfile.addEventListener('click', toggleProfilePopup);
      closeProfileBtn.addEventListener('click', toggleProfilePopup);
      profileOverlay.addEventListener('click', toggleProfilePopup);

      function updateProfileDisplay(name, email) {
        const initials = name.split(' ').map(n => n[0]).join('');
        
        // Update all instances of the profile information
        avatarPlaceholders.forEach(placeholder => {
          placeholder.textContent = initials;
        });
        
        userNameElements.forEach(element => {
          element.textContent = name;
        });
        
        userEmailElements.forEach(element => {
          element.textContent = email;
        });
      }

      profileForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = profileName.value.trim();
        const email = profileEmail.value.trim();
        
        updateProfileDisplay(name, email);
        toggleProfilePopup();
      });
    });
  </script>
</body>
</html>