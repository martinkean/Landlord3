<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Messages - Flat Finder Landlord</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/messages.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const conversations = document.querySelectorAll('.conversation-item');
      const messagesThread = document.querySelector('.messages-thread');
      const messageInput = document.querySelector('.message-input');
      const sendButton = document.querySelector('.send-button');
      const searchInput = document.querySelector('.search-input');

      // Switch active conversation
      conversations.forEach(conversation => {
        conversation.addEventListener('click', () => {
          // Remove active class from all conversations
          conversations.forEach(c => c.classList.remove('active'));
          // Add active class to clicked conversation
          conversation.classList.add('active');
          
          // Update header with conversation details
          const name = conversation.querySelector('.conversation-name').textContent;
          const avatar = conversation.querySelector('.avatar-placeholder').textContent;
          const avatarColor = conversation.querySelector('.avatar-placeholder').classList[1];
          
          document.querySelector('.message-header .avatar-placeholder').textContent = avatar;
          document.querySelector('.message-header .avatar-placeholder').className = `avatar-placeholder ${avatarColor}`;
          document.querySelector('.message-contact h2').textContent = name;
        });
      });

      // Send message function
      function sendMessage(text) {
        const now = new Date();
        const time = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
        
        const messageHTML = `
          <div class="message">
            <div class="message-content">
              <p>${text}</p>
            </div>
            <div class="message-time">${time}</div>
            <div class="user-avatar">
              <div class="avatar-placeholder small">AJ</div>
            </div>
          </div>
        `;
        
        messagesThread.insertAdjacentHTML('beforeend', messageHTML);
        messagesThread.scrollTop = messagesThread.scrollHeight;
      }

      // Handle message sending
      function handleSend() {
        const text = messageInput.value.trim();
        if (text) {
          sendMessage(text);
          messageInput.value = '';
        }
      }

      sendButton.addEventListener('click', handleSend);
      messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          handleSend();
        }
      });

      // Search conversations
      searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        conversations.forEach(conversation => {
          const name = conversation.querySelector('.conversation-name').textContent.toLowerCase();
          const message = conversation.querySelector('.conversation-last-message').textContent.toLowerCase();
          const matches = name.includes(searchTerm) || message.includes(searchTerm);
          conversation.style.display = matches ? 'flex' : 'none';
        });
      });
    });
  </script>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="house-icon">
            <div class="roof"></div>
            <div class="base"></div>
          </div>
          <h1>FLAT FINDER LANDLORD</h1>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="index.html" class="nav-item">
          <div class="nav-icon dashboard-icon"></div>
          <span>Dashboard</span>
        </a>
        <a href="listings.html" class="nav-item">
          <div class="nav-icon listings-icon"></div>
          <span>Listings</span>
        </a>
        <a href="applications.html" class="nav-item">
          <div class="nav-icon applications-icon"></div>
          <span>Applications</span>
        </a>
        <a href="calendar.html" class="nav-item">
          <div class="nav-icon calendar-icon"></div>
          <span>Calendar</span>
        </a>
        <a href="messages.html" class="nav-item active">
          <div class="nav-icon messages-icon"></div>
          <span>Messages</span>
        </a>
        <a href="analytics.html" class="nav-item">
          <div class="nav-icon analytics-icon"></div>
          <span>Analytics</span>
        </a>
        <a href="#" class="nav-item logout">
          <div class="nav-icon logout-icon"></div>
          <span>Log out</span>
        </a>
      </nav>
      
      <div class="user-profile">
        <div class="avatar">
          <div class="avatar-placeholder">AJ</div>
        </div>
        <div class="user-info">
          <h3 class="user-name">Andrew James</h3>
          <p class="user-email">AJ@cutlers.co.nz</p>
        </div>
      </div>
    </aside>
    
    <!-- Main Content -->
    <main class="main-content">
      <div class="page-header">
        <h1 class="page-title">Messages</h1>
      </div>
      
      <div class="messages-container">
        <div class="conversations-list">
          <div class="search-container">
            <input type="text" class="search-input" placeholder="Search conversations...">
            <div class="search-icon"></div>
          </div>
          
          <div class="conversation-item active">
            <div class="conversation-avatar">
              <div class="avatar-placeholder blue">GC</div>
            </div>
            <div class="conversation-preview">
              <div class="conversation-name">Gabe Cook-Bonney</div>
              <div class="conversation-last-message">Hey our hot water cylinder seems to be ...</div>
            </div>
          </div>
          
          <div class="conversation-item">
            <div class="conversation-avatar">
              <div class="avatar-placeholder dark">JK</div>
            </div>
            <div class="conversation-preview">
              <div class="conversation-name">John Knome</div>
              <div class="conversation-last-message">Hello, what time are you coming in to ...</div>
            </div>
          </div>
          
          <div class="conversation-item">
            <div class="conversation-avatar">
              <div class="avatar-placeholder pink">JD</div>
            </div>
            <div class="conversation-preview">
              <div class="conversation-name">Jane Dough</div>
              <div class="conversation-last-message">Kia Ora! We would like to know weather or...</div>
            </div>
          </div>
          
          <div class="conversation-item">
            <div class="conversation-avatar">
              <div class="avatar-placeholder teal">WS</div>
            </div>
            <div class="conversation-preview">
              <div class="conversation-name">Will Skee</div>
              <div class="conversation-last-message">Yea that would be great thanks, we will ...</div>
            </div>
          </div>
        </div>
        
        <div class="message-view">
          <div class="message-header">
            <div class="message-avatar">
              <div class="avatar-placeholder blue">GC</div>
            </div>
            <div class="message-contact">
              <h2>Gabe Cook-Bonney (33 Bedford Tenant)</h2>
            </div>
          </div>
          
          <div class="messages-thread">
            <div class="message tenant">
              <div class="message-content">
                <p>Hey our hot water cylinder seems to be leaking and is becoming faulty. Our shower goes cold and our power bill is through the roof.</p>
                <p>Are you able to schedule a contractor please?</p>
              </div>
              <div class="message-time">10:00 pm</div>
              <div class="user-avatar">
                <div class="avatar-placeholder small blue">GC</div>
              </div>
            </div>
          </div>
          
          <div class="message-input-container">
            <input type="text" class="message-input" placeholder="Type your message and press Enter...">
            <button class="send-button">
              <div class="send-icon"></div>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>
</html>